<!DOCTYPE html>

<html class="light" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Work-i-Go Welcome</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#345395",
                        "accent": "#f95e07",
                        "background-light": "#f8f6f5",
                        "background-dark": "#23160f",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        .material-symbols-outlined {
            font-variation-settings:
            'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
    </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="font-display">
<div class="relative flex min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-x-hidden">
<div class="flex flex-col h-full w-full grow pt-12 pb-6">
<!-- Logo -->
<div class="flex items-center justify-center gap-2 px-4 pb-8">
<span class="material-symbols-outlined text-primary dark:text-white text-4xl">work</span>
<span class="text-3xl font-extrabold tracking-tight text-primary dark:text-white">Work-i-Go</span>
</div>
<!-- Image -->
<div class="flex w-full grow bg-background-light dark:bg-background-dark @container">
<div class="w-full gap-1 overflow-hidden bg-background-light dark:bg-background-dark @[480px]:gap-2 aspect-[4/3] flex">
<div class="w-full bg-center bg-no-repeat bg-cover aspect-auto rounded-none flex-1" data-alt="A vibrant illustration of three diverse individuals happily engaged in different part-time jobs, like a barista, a delivery person, and a retail assistant." style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBg9ye4kS0JcScVpamcf1jIfR3L0vKGhEwJUo00tXEWWhwdd5CnY7szhFFGrruXg0yUl0lcljCBriG-SSTulclO7SZhaD3t_1-cvEMnCfWqJXooCc3vR_WWdNaoCrzdlzcwyjF5k4BNcCHH5iC3ALUpSA07b7BSsK7B3-bbEDau3_tRgim6OPuanC23woe0Nq1pley09zZ6dp8ijKtNRiTwRDKpsJHfmBonmHirrfGpJa8AXgLnIY4zw9nsgmKi0df4XoaDQRKtblU");'></div>
</div>
</div>
<!-- Headline and Body Text -->
<div class="px-4 pt-8">
<h1 class="text-primary dark:text-white tracking-tight text-3xl font-bold leading-tight text-center pb-3">Part-time work, simplified.</h1>
<p class="text-[#181311] dark:text-gray-300 text-base font-normal leading-normal pb-3 pt-1 text-center">Connect with local employers and find flexible jobs that fit your schedule.</p>
</div>
<!-- Button Group -->
<div class="flex justify-center pt-5">
<div class="flex flex-1 gap-3 max-w-[480px] flex-col items-stretch px-4">
<button onclick="window.location.href='signup.html'" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-accent text-white text-base font-bold leading-normal tracking-[0.015em] w-full">
<span class="truncate">Sign Up</span>
</button>
<button onclick="window.location.href='signin.html'"class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-12 px-5 bg-accent/20 dark:bg-white/10 text-accent dark:text-white text-base font-bold leading-normal tracking-[0.015em] w-full">
<span class="truncate">Log In</span>
</button>
</div>
</div>

<!-- Divider -->
<div class="flex items-center gap-4 px-4 py-4">
<hr class="w-full border-gray-200 dark:border-gray-700"/>
<span class="text-sm font-medium text-gray-500 dark:text-gray-400">or</span>
<hr class="w-full border-gray-200 dark:border-gray-700"/>
</div>
<!-- Social Logins -->
<div class="flex justify-center">
<div class="flex w-full max-w-[480px] flex-col items-stretch gap-3 px-4">
<button type="button" onclick="googleLogin()"
        class="w-full h-14 rounded-xl border font-bold flex items-center justify-center gap-2">
        Continue with Google
      </button>

</div>
</div>
<!-- Footer -->
<div class="px-4 pt-8">
<p class="text-xs text-center text-gray-500 dark:text-gray-400">By continuing, you agree to our <a class="font-semibold underline" href="#">Terms of Service</a> and <a class="font-semibold underline" href="#">Privacy Policy</a>.</p>
</div>
</div>
</div>
<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm"

const supabase = createClient(
  "https://ispbevvwwggbktfczmui.supabase.co",
  "sb_publishable_5pnSaiKllm-q7UNMe5r7pw_n4Qu-AJ7"
)
/* ===== REDIRECT BY ROLE ===== */
async function redirectByRole(user) {
  const { data: profile, error } = await supabase
    .from("profiles")
    .select("role_id")
    .eq("id", user.id)
    .single()

console.log("USER FROM SUPABASE:", user)
console.log("ðŸ” USER FROM SUPABASE:", user)
console.log("âŒ AUTH ERROR:", error)

  console.log("PROFILE:", profile)

  if (!profile || profile.role_id === null) {
  window.location.replace("select_role.html")

} else if (profile.role_id === 2) {
  window.location.replace("job_seeker_home.html")

} else if (profile.role_id === 1) {
  window.location.replace("employer_home.html")

} else if (profile.role_id === 4) {
  window.location.replace("Admin_Dashboard.html")

} else if (profile.role_id === 3) {
  window.location.replace("Legal_management_post.html")

}
}

/* ===== GOOGLE LOGIN ===== */
window.googleLogin = async () => {
  await supabase.auth.signInWithOAuth({
    provider: "google",
    options: {
      redirectTo: `${window.location.origin}/signin.html`
    }
  })
}
supabase.auth.onAuthStateChange(async (event, session) => {
  console.log("AUTH EVENT:", event)
  console.log("SESSION:", session)

  const user = session?.user

  if (
    (event === "SIGNED_IN" || event === "INITIAL_SESSION") &&
    user
  ) {
    await redirectByRole(user)
  }
})
</script>
</body></html>